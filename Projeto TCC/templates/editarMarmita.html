{% extends "modelo-adm.html" %}
{% block conteudo %}
<link rel="stylesheet" href="../static/styles/editarMarmita.css">

<body>
    <main>
        <h1>Atualizar Marmitas</h1>
        <table>
            <thead>
                <tr>
                    <th>Marmita</th>
                    <th>Preço</th>
                    <th>Descrição</th>
                    <th>Imagem Atual</th>
                    <th>Nova Imagem</th>
                    <th>Tamanho</th>
                    <th>Acompanhamentos</th>
                    <th>Guarnições</th>
                    <th>Ação</th>
                </tr>
            </thead>
            <tbody>
                {% for marmita in lista_marunica %}
                <tr>
                    <form method="POST" action="/atualizar_marmita" enctype="multipart/form-data">
                        <input type="hidden" name="id_marmita" value="{{ marmita.id_marmita }}">
                        
                        <td>
                            <input type="text" name="nome" value="{{ marmita.nome_marmita }}" required>
                        </td>
                        <td>
                            <input type="text" name="preco" value="{{ marmita.preco }}" required>
                        </td>
                        <td>
                            <textarea name="descricao" required>{{ marmita.descricao }}</textarea>
                        </td>
                        <td>
                            <img src="{{ url_for('imagem_marmita', id_marmita=marmita.id_marmita) }}" alt="Imagem da Marmita {{ marmita.nome_marmita }}" style="width: 100px; height: auto;">
                        </td>
                        <td>
                            <input type="file" name="imagem" accept="image/png, image/jpeg">
                        </td>
                        <td>
                            <select name="tamanho" required>
                                <option value="Pequena" {% if marmita.tamanho == 'Pequena' %}selected{% endif %}>Pequena</option>
                                <option value="Média" {% if marmita.tamanho == 'Média' %}selected{% endif %}>Média</option>
                                <option value="Grande" {% if marmita.tamanho == 'Grande' %}selected{% endif %}>Grande</option>
                            </select>
                        </td>
                        <td>
                            {% for acompanhamento in marmita.acompanhamentos %}
                            <label>
                                <input type="checkbox" name="acompanhamentos[]" value="{{ acompanhamento.id }}" {% if acompanhamento.id in marmita.acompanhamentos_selecionados %}checked{% endif %}>
                                {{ acompanhamento.nome }}
                            </label><br>
                            {% endfor %}
                        </td>
                        <td>
                            {% for guarnicao in marmita.guarnicoes %}
                            <label>
                                <input type="checkbox" name="guarnicoes[]" value="{{ guarnicao.id }}" {% if guarnicao.id in marmita.guarnicoes_selecionadas %}checked{% endif %}>
                                {{ guarnicao.nome }}
                            </label><br>
                            {% endfor %}
                        </td>
                        <td>
                            <button type="submit">Atualizar Marmita</button>
                        </td>
                    </form>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </main>
</body>

<div class="espacamento1"></div>

{% endblock %}
