{% extends "modelo.html" %}
{% block conteudo %}
<link rel="stylesheet" href="../static/styles/marmita.css">

<body>
    <main>
        {% for marmita in lista_marunica %}
        <img class="ft-item" src="{{ marmita.imagem_marmita }}" alt="Imagem da Marmita">

        <section class="descricao">
            <span class="nome-produto">{{ marmita.nome_marmita }}</span>
            <span class="descricao-produto">{{ marmita.descricao }}</span>
            <span class="preco-produto">R$ {{ marmita.preco }}</span>

            <div class="opc">
                <!-- Campos para Acompanhamentos -->
                {% if marmita.acompanhamentos and marmita.acompanhamentos|length > 0 %}
                <div class="acompanhamentos">
                    <div class="header">
                        <div class="titulosubtitulo">
                            <h3>Acompanhamentos</h3>
                            <p>Escolha até 3 acompanhamentos</p>
                        </div>
                        <span class="seta" onclick="toggleAcompanhamentos(this)">&#9660;</span>
                    </div>
                    <div class="opcoes-acompanhamentos hidden">
                        {% for acompanhamento in marmita.acompanhamentos %}
                        <div class="acompanhamento">
                            <img src="https://pedido.anota.ai/assets/item_no_image-a8c57261.png" alt="{{ acompanhamento }}">
                            <span>{{ acompanhamento }}</span>
                            <label>
                                <input type="checkbox" name="acompanhamento" value="{{ acompanhamento }}">
                                <span></span>
                            </label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Campos para Guarnições -->
                {% if marmita.guarnicoes and marmita.guarnicoes|length > 0 %}
                <div class="acompanhamentos">
                    <div class="header">
                        <div class="titulosubtitulo">
                            <h3>Guarnições</h3>
                            <p>Escolha no máximo 1 guarnição</p>
                        </div>
                        <span class="seta" onclick="toggleGuarnicoes(this)">&#9660;</span>
                    </div>
                    <div class="opcoes-guarnicoes hidden">
                        {% for guarnicao in marmita.guarnicoes %}
                        <div class="acompanhamento">
                            <img src="https://pedido.anota.ai/assets/item_no_image-a8c57261.png" alt="{{ guarnicao }}">
                            <span>{{ guarnicao }}</span>
                            <label>
                                <input type="radio" name="guarnicao" value="{{ guarnicao }}">
                                <span></span>
                            </label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Botões no final -->
                <div class="sair">
                    <a href="/">Voltar</a>
                    <form action="/inserir_carrinho" method="post">
                        <input type="hidden" name="id_marmita" value="{{ marmita.id_marmita }}"> <!-- ID da marmita -->
                        <button type="submit">Adicionar a sacola</button>
                    </form>
                </div>
            </div>
        </section>
        {% endfor %}
    </main>
</body>

<div class="espacamento1"></div>

<script>
    function toggleAcompanhamentos(seta) {
        const opcoes = seta.parentElement.parentElement.querySelector('.opcoes-acompanhamentos');
        opcoes.classList.toggle('hidden'); // Alterna a classe hidden

        seta.innerHTML = opcoes.classList.contains('hidden') ? '&#9654;' : '&#9660;'; // Muda a seta
    }

    function toggleGuarnicoes(seta) {
        const opcoes = seta.parentElement.parentElement.querySelector('.opcoes-guarnicoes');
        opcoes.classList.toggle('hidden'); // Alterna a classe hidden

        seta.innerHTML = opcoes.classList.contains('hidden') ? '&#9654;' : '&#9660;'; // Muda a seta
    }
</script>
{% endblock %}
