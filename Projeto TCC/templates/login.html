{% extends "modelo.html" %}
{% block conteudo %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/login.css') }}">

<body>
    <main>
        <div class="btn-voltar">
            <button onclick="window.history.back()">
                <img src="https://www.svgrepo.com/show/324205/back-arrow-navigation.svg" alt="Voltar">
            </button>
        </div>

        <div class="titulo">
            <h2>Olá! Logue agora para Começar</h2>
        </div>
        <section class="container-principal">
            <div class="formulario">
                <form action="{{ url_for('logar') }}" method="post">
                    <input name="email" id="email" placeholder="*E-mail" type="text" required>
                    <input name="senha" id="senha" placeholder="*Senha" type="password" required>
                    <a href="/trocar_senha"><span>Esqueceu sua senha?</span></a>
                    <button type="submit">Entrar</button>
                </form>
                <!-- Animação do checkmark após login bem-sucedido -->

            </div>
            <span class="semConta">Ainda não tem conta? <a href="/cadastro">Crie Aqui!</a></span>
        </section>

        <div class="success-checkmark-overlay {% if login_sucesso %}visible{% else %}hidden{% endif %}"
            id="success-overlay">
            <div id="success-checkmark" class="success-checkmark">
                <div class="check-icon">
                    <span class="icon-line line-tip"></span>
                    <span class="icon-line line-long"></span>
                    <div class="icon-circle"></div>
                    <div class="icon-fix"></div>
                </div>
                <span id="success-message" class="success-message">Logado com sucesso!</span>
            </div>
        </div>



        <!-- JavaScript para exibir a animação e redirecionar -->
        {% if login_sucesso %}
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var loginSucesso = "{{ login_sucesso|tojson|default('false') }}";

                if (loginSucesso) {
                    const successOverlay = document.getElementById('success-overlay');
                    const successMessage = document.getElementById('success-message');
                    successOverlay.classList.add('visible'); // Mostra a sobreposição

                    // Torna a mensagem visível após um pequeno atraso
                    setTimeout(function () {
                        successMessage.classList.add('visible'); // Torna a mensagem visível
                    }, 200); // Aguarda 100ms antes de mostrar a mensagem

                    // Após alguns segundos, redireciona para a página inicial
                    setTimeout(function () {
                        successOverlay.classList.remove('visible'); // Remove a classe antes do redirecionamento
                        window.location.href = "/"; // Redireciona
                    }, 1750); // Aguarda 4 segundos antes do redirecionamento
                }
            });

        </script>
        {% endif %}


    </main>
</body>
{% endblock %}